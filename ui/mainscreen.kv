#: import Window kivy.core.window.Window
#: import Factory kivy.factory.Factory

<BorrowBook>:
	title: 'Record a Book Borrowing'
	auto_dismiss: False
	BoxLayout:
		orientation: 'vertical'

		Label:
			id: err_msg
			text: ''
		
		BoxLayout:
			orientation: 'horizontal'
			Label:
				text: 'Borrower Username:'
			TextInput:
				multiline: False
				on_text: root.borrower_username = self.text
		BoxLayout:
			orientation: 'horizontal'
			Label:
				text: 'Checker Username:'
			TextInput:
				multiline: False
				on_text: root.checker_username = self.text

		BoxLayout:
			orientation: 'horizontal'
			Label:
				text: 'Book id:'
			TextInput:
				multiline: False
				on_text: root.book_id = self.text

		BoxLayout:
			orientation: 'horizontal'
			Label:
				text: 'Date of Retrival:'
			TextInput:
				multiline: False
				on_text: root.date_of_retrival = self.text
		
		BoxLayout:
			orientation: 'horizontal'
			Button:
				text: 'add book'
				on_press: root.borrow_book()
			Button:
				text: 'cancel'
				on_press: root.dismiss()

<MainScreen>:
	Screen:
		TabbedPanel:
			do_default_tab: False
			size_hint: 1, 1
		
			TabbedPanelItem:
				text: 'Borrowings'

				BoxLayout:
					orientation: 'vertical'

					BoxLayout:
						orientation: 'horizontal'
						size_hint: 1, 0.1

						Label:
							size_hint: 0.1, 1
							text: 'Record ID:'
						TextInput:
							size_hint: 0.6, 1
							multiline: False
							on_text: root.record_id = self.text

						Button:
							size_hint: 0.2, 1
							text: 'Return Book'
							on_press: root.return_book()
						
						Button:
							size_hint: 0.2, 1
							text: 'Refresh'
							on_press: root.refresh()
						
						Button:
							size_hint: 0.2, 1
							text: 'Borrow Book'
							on_press: Factory.BorrowBook().open()
					Label:
						text: ''
						id: err_msg
						size_hint_y: 0.1

					Label:
						text: 'id | borrower | checker | book title | date of borrowing | date of retrival'
						size_hint_y: 0.1

					BoxLayout:
						size_hint: 1, 0.7
						RecycleView:
							viewclass: 'Label'
							id: borrow_records
							RecycleBoxLayout:
								default_size: None, dp(56)
								default_size_hint: 1, None
								size_hint_y: None
								height:	self.minimum_height 
								orientation: 'vertical'

			TabbedPanelItem:
				text: 'Books'

			TabbedPanelItem:
				text: 'Users'
				
				BoxLayout:
					orientation: 'vertical'
					BoxLayout:
						pos_hint: {'top_y': 0}
						size_hint: 1, 0.1
						orientation: 'horizontal'
						Button:
							text: 'refresh'
							on_press: root.init_user_info()
							size_hint: 0.2, 0.1
					Label:
						text: 'id | Username | allowed to borrow'
						size_hint: 1, 0.1

					RecycleView:
						size_hint: 1, 0.2
						viewclass: 'Label'
						id: customers_records
						RecycleBoxLayout:
							default_size: None, dp(56)
							default_size_hint: 1, None
							size_hint_y: None
							height:	self.minimum_height 
							orientation: 'vertical'

